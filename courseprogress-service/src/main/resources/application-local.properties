# ===============================
# Grade Service - Local Profile
# ===============================
spring.application.name=grade-service
server.port=8085

# ===============================
# Datasource: Postgres if available, otherwise H2
# ===============================
# If POSTGRES_URL is set, use Postgres; otherwise H2
spring.datasource.url=${POSTGRES_URL:jdbc:h2:mem:gradedb;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE}
spring.datasource.username=${POSTGRES_USERNAME:sa}
spring.datasource.password=${POSTGRES_PASSWORD:}
spring.datasource.driver-class-name=${POSTGRES_URL:}org.h2.Driver

# ===============================
# JPA / Hibernate
# ===============================
# Auto-detect dialect based on DB
spring.jpa.database-platform=${POSTGRES_URL:org.hibernate.dialect.H2Dialect}
spring.jpa.hibernate.ddl-auto=${POSTGRES_URL:update}

spring.jpa.show-sql=true
spring.jpa.open-in-view=false

# ===============================
# H2 Console
# ===============================
# Enabled only if H2 is used
spring.h2.console.enabled=true
spring.h2.console.path=/h2-console

# ===============================
# Swagger / OpenAPI
# ===============================
springdoc.swagger-ui.path=/swagger-ui/index.html
# springdoc.api-docs.path=/v3/api-docs

springdoc.api-docs.enabled=true
springdoc.api-docs.path=/v3/api-docs
springdoc.swagger-ui.cors=true
# springdoc.api-docs.path=/api-docs
